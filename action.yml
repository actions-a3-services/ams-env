name: AMS Setup
description: Setup AMS environment variables
author: a3.services
branding:
  icon: settings
  color: purple
inputs: {}
outputs: {}
runs:
  using: composite
  steps:
    - shell: bash
      run: |
        export TZ="Europe/Bratislava"
        git fetch --unshallow || git fetch
        AMS_REVISION=$(git describe --tags 2>/dev/null || echo "no-tag")
        echo "AMS_NAME=${{ github.event.repository.name }}" >> ${GITHUB_ENV}
        echo "AMS_REVISION=$AMS_REVISION" >> ${GITHUB_ENV}
        echo "AMS_BUILD=$(date '+%y%m%d-%H%M%S')" >> ${GITHUB_ENV}
        echo ${GITHUB_ENV}
